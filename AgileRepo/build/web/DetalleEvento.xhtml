<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templateEventos.xhtml">

    <ui:define name="title">#{detallecontroller.nombreEvento}</ui:define>

    <ui:define name="head">

        <f:metadata>
            <f:viewAction action="#{detallecontroller.onLoad()}" />
        </f:metadata>


        <script type="text/javascript">
            //<![CDATA[
            function skinChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#007be5', '#20d077'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#F5F5F5',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#666F77'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    lineWidth: 1,
                    markerOptions: {
                        shadow: false,
                        size: 7,
                        style: 'circle'
                    }
                }
            }
            //]]>  
        </script>



        <style type="text/css">
            .main-content {
                padding: 0;
            }
        </style>

    </ui:define>

    <ui:define name="content">



        <div class="dashboard" style="height:100%; width:100%; min-height:100%; ">




            <h:form id="eventos" style="height:100%; width:100%; min-height:100%;" >

                <!-->
                Este es el control que se encarga del drag and drop. Trae una 
                lista de los "detalles"(slots), que coinciden con el id del 
                evento que se clickeó en el dashboard
                
                </!-->


                <p:orderList id="ord" value="#{detallecontroller.detalles}" var="detalle"
                             itemLabel="#{detalle}" controlsLocation="none" converter="#{detalleconverter}" itemValue="#{detalle}"  responsive="true" 
                             style="height:100%; width:100%; min-height:100%;">

                    <p:ajax event="reorder" listener="#{detallecontroller.onReorder()}"/>

                    <!-->
                    Esto es lo que controla las tarjetas. 
                    Para los estilos, revisar layout.css y myLogin.css 
                    </!-->

                    <p:column style="width:100%; height:100%;">

                        <div class="card clearfix summary"  >
                            <div style="width:90%">


                                <span class="options">


                                    <p:commandButton  action="#{detallecontroller.outcome()}" icon="pi pi-cog" update="Slot" >
                                        <f:param name="tituloSlot" value="#{detalle.titulo}" />
                                        <f:param name="idSlot" value="#{detalle.id}" />
                                        <f:param name="descSlot" value="#{detalle.descripcion}" />
                                        <f:param name="objSlot" value="#{detalle.objetivo}" />
                                        <f:param name="catSlot" value="#{detalle.categoria}" />
                                        <f:param name="colcatSlot" value="#{detalle.colorCategoria}" />
                                        <f:param name="pasSlot" value="#{detalle.pasos}" />
                                        <f:param name="matSlot" value="#{detalle.materiales}" />
                                        <f:ajax onevent="PF('side_info').show()"/>
                                    </p:commandButton>

                                </span>

                            </div>
                            <span class="count visitors" style="background-color:##{detalle.colorCategoria}">#{detalle.duracion}</span>
                            <div style="width:90%">
                                <span id="tit" class="title">#{detalle.titulo}</span>

                            </div>


                            <div>
                                <span class="detail">#{detalle.descripcion}</span>

                            </div>




                        </div>


                    </p:column>  



                </p:orderList>       


            </h:form>
            <!--Esto controla el sidebar que aparece de la derecha donde se puede editar la informacion
            de los slots-->
            <p:sidebar id="sidebarslot" widgetVar="side_info" position="right" baseZIndex='0' style="background: white;width: 100%; height: 100%; overflow: scroll;">

                <h:form id="Slot">
                    <h1>Título</h1>
                    <p:inputTextarea id="titulo" rows="1" placeholder="TITULO DEL SLOT" readonly="false" value="#{detallecontroller.titulo}" style="width:90%; font-size: 20px;">
                        <f:validateLength maximum="50" />
                        <p:clientValidator event="keyup"/>
                    </p:inputTextarea>
                    <p:message for="titulo" display="text" />
                    <p:separator />

                    <h1>Descripción</h1>
                    <p:inputTextarea id="descripcion" rows="4" placeholder="DESCRIPCION" readonly="false" value="#{detallecontroller.descripcion}" style="width:90%; font-size: 14px;">
                        <f:validateLength maximum="280" />
                        <p:clientValidator event="keyup"/>
                    </p:inputTextarea>
                    <p:message for="descripcion" display="text" />  
                    <h1>Objetivo</h1>
                    <p:inputTextarea id="objetivo" rows="4" placeholder="OBJETIVO" readonly="false" value="#{detallecontroller.objetivo}" style="width:90%; font-size: 14px;">
                        <f:validateLength maximum="280" />
                        <p:clientValidator event="keyup"/>
                    </p:inputTextarea>
                    <p:message for="objetivo" display="text" />  
                    <p:separator />

                    <h1>Categoría</h1>

                    <h:panelGrid columns="2" cellpadding="5" style="margin-left: 20px">
                        <p:inputTextarea id="categoria" rows="1" placeholder="CATEGORIA" readonly="false" value="#{detallecontroller.categoria}" style="width:150px; font-size: 14px;">
                            <f:validateLength maximum="50" />
                            <p:clientValidator event="keyup"/>
                        </p:inputTextarea>
                        <p:message for="categoria" display="text" />  
                        <p:colorPicker value="#{detallecontroller.colorCategoria}" onchange="#{detallecontroller.colorCategoria}" />
                    </h:panelGrid>
                    <p:separator />

                    <h1>Pasos</h1>
                    <p:inputTextarea id="pasos" rows="5" placeholder="Pasos" readonly="false" value="#{detallecontroller.pasos}" style="width:90%; font-size: 14px;">
                        <f:validateLength maximum="2000" />
                        <p:clientValidator event="keyup"/>
                    </p:inputTextarea>
                    <p:message for="pasos" display="text" />  
                    <h1>Materiales</h1>
                    <p:inputTextarea id="materiales" rows="5" placeholder="Materiales" readonly="false" value="#{detallecontroller.materiales}" style="width:90%; font-size: 14px;">
                            <f:validateLength maximum="2000" />
                        <p:clientValidator event="keyup"/>
                    </p:inputTextarea>
                    <p:message for="materiales" display="text" />  
                    <p:separator />

                    <h:panelGrid  columns="2" cellpadding="5" style="margin-left: 20px">
                        <p:commandButton id="btnSlot"  value="Guardar" actionListener="#{detallecontroller.updateSlot()}" update="eventos" validateClient="true" />
                        <p:commandButton value="Cerrar" oncomplete="PF('side_info').hide()"/>
                    </h:panelGrid>


                </h:form>

            </p:sidebar> 


        </div>

        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />

    </ui:define>


</ui:composition>