<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <body>

        <ui:composition template="./WEB-INF/templateEvtPublic.xhtml">
            <ui:define name="title">Publica tus eventos</ui:define>
            <ui:define name="head">
                <f:metadata>
                    <f:viewAction action="#{eventWizardController.onLoad()}" />
                    <f:viewAction action="#{eventWizardImageController.onLoad()}" />
                </f:metadata>
            </ui:define>

            <ui:define name="content">
                <script type="text/javascript">
                    //window.onload = ini;
                    //function ini() {
                    //    let btnNext = document.getElementById('j_idt32:j_idt33_next');
                    //    let secondSpan = btnNext.children[1];
                    //    secondSpan.innerHTML ='Siguiente';
                    // }
                </script>
                <center>    
                    <h:form prependId="false" id="publicarEvento" style="width: 90%;height: 100%;padding: 30px;border-radius: 6px;">
                        <p:messages closable="true"  id="messageErrorTag" >
                            <p:autoUpdate />
                        </p:messages>
                        <p:accordionPanel  id="publicarEventoInner" prependId="false" widgetVar="wPublicacion" style="width: 100%;height: 100%;margin-top: 10px !important;border-radius: 10px;" >

                            <!-->Tab para la información básica</!-->
                            <p:tab id="infoBasica" title="Información Básica"  >
                                <p:panel  style="text-align: left;width: 100%;height: 100%;border: none !important;background: #ffffff">
                                    <p:panel id="pnlHelp" style="text-align: left">
                                        <p:panel style="display:block;border: none">
                                            <p:commandButton  partialSubmit="true"
                                                              class="textButtonIcon"
                                                              process="@this" validateClient="true"  
                                                              iconPos="center" icon="fa fa-align-left"></p:commandButton>
                                            <h:outputText  value="Información Básica" style="font-size: xx-large;font-weight: bold"></h:outputText>  
                                        </p:panel>

                                        <h:inputTextarea 
                                            cols="1"
                                            readonly="true" 
                                            style="color: #999999;display: block;width: 100%;border: none;resize: none; font-family:Arial,Helvetica;background: none;font-size: medium;text-align: left"
                                            class="detail txtIntro" 
                                            value="Elige un nombre para tu evento y cuéntales a los asistentes por que creés que lo van a pasar genial.Añade detalles que destaquen por qué tu evento es único.
                                            "> 
                                        </h:inputTextarea>
                                        <!--Colocar el nombre del evento-->
                                        <div style="width: 100%;border: solid #cccccc thin;border-radius: 6px;">
                                            <label style="color: #999999;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;margin:4px">Nombre del evento</label>
                                            <center>
                                                <p:inputTextarea
                                                    value="#{eventWizardController.nombreEvento}"
                                                    placeholder="Joseph Joestar Fans..."
                                                    id="inputNameEvt"
                                                    class="inputNameEvt"
                                                    requiredMessage="El nombre del evento es obligatorio."
                                                    style="color: #000;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;width: 100%;border: none !important;margin: 0px;padding: 8px !important"
                                                    required="true"
                                                    maxlength="75"
                                                    counter="eventoNombreC"
                                                    counterTemplate="{0}/75">

                                                </p:inputTextarea>
                                                <!--Mensaje de error-->
                                                <p:message  id="messagesNombreEvt" for="inputNameEvt" showDetail="false">
                                                    <p:autoUpdate />
                                                </p:message>
                                            </center>
                                        </div>
                                        <!--Counter del nombre del evento-->
                                        <div style="width: 100%;text-align: left" id="counterContainerEvt">
                                            <h:outputText style="font-weight: bold;float: right" id="eventoNombreC" ></h:outputText>
                                        </div>
                                        <br></br>
                                        <br></br>

                                        <!--Seleccionar un tipo para el evento-->

                                        <div style="width: 100%;">
                                            <p:selectOneMenu   value="#{eventWizardController.tipoEvento}"  requiredMessage="Seleccione uno."  required="true" id="selectSoC" effect="fold" style="margin: 0px;padding: 0px;width:100%;margin-bottom:4px !important">
                                                <f:selectItem itemLabel="Seminario o Charla" itemValue="" />
                                                <f:selectItem  itemLabel="Seminario" itemValue="Seminario" />
                                                <f:selectItem itemLabel="Charla" itemValue="Charla" />
                                            </p:selectOneMenu>
                                            <!--Mensaje de error-->
                                            <p:message   id="messageDropdown" for="selectSoC" showDetail="false">
                                                <p:autoUpdate />
                                            </p:message>
                                        </div>
                                        <br></br>
                                        <br></br>
                                        <!--UI de tags-->

                                        <div style="width: 100%;border: solid #cccccc thin;padding:0px;border-radius: 6px;">
                                            <!--Ui-Fluid-->
                                            <div class="ui-g ui-fluid">
                                                <div class="ui-g-12 ui-md-8">
                                                    <!--Col1-->
                                                    <label style="color: #999999;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;margin:4px">Tags</label>
                                                    <center>   
                                                        <p:inputTextarea
                                                            placeholder="JJ-6"
                                                            id="inputTag"
                                                            class="inputTag"
                                                            style="display: inline-block;width: 100%;height: 100%;margin: 0px;padding-left:  8px !important;border: none !important"
                                                            maxlength="25"
                                                            required="true"
                                                            requiredMessage="No pueden añadirse vacíos."
                                                            counter="eventoTagC"
                                                            value="#{eventWizardController.newTag}"
                                                            counterTemplate="{0}/25">

                                                        </p:inputTextarea>
                                                        <!--Mensaje de error-->
                                                        <p:message  id="messagesTag" for="inputTag" showDetail="false">
                                                            <p:autoUpdate />
                                                        </p:message>
                                                    </center>  
                                                </div>
                                                <div class="ui-g-12 ui-md-3" style="vertical-align: middle;text-align: center" >
                                                    <p:commandButton 
                                                        validateClient="true"
                                                        update="messageErrorTag"
                                                        icon="fas fa-plus"
                                                        iconPos="left"
                                                        process="@this inputTag,messageErrorTag"
                                                        partialSubmit="true"
                                                        actionListener="#{eventWizardController.addTag}"
                                                        style="float: inside;display: block;width: 90%;height: 80% !important;margin-top:6px;margin-bottom: 4px;margin-right:4px;margin-left: 8px"
                                                        value="Añadir">
                                                    </p:commandButton>
                                                </div>
                                                <div class="ui-g-12 ui-md-1" >
                                                    <center>
                                                        <p:commandButton
                                                            validateClient="true"
                                                            partialSubmit="true"
                                                            process="@this"
                                                            id="btnTool"
                                                            class="btnTool"
                                                            iconPos="center"
                                                            icon="fas fa-comment-dots"
                                                            style="margin: 24px;width: 32px;height: 32px;border-radius: 50%;">
                                                        </p:commandButton>
                                                    </center>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Counter para nombre y numero de tags-->
                                        <p:panel   style="border: none;width: 100%;text-align: left" id="counterContainerTag">
                                            <h:outputText   style="font-weight: bold;float: right" id="eventoTagC" ></h:outputText>
                                            <h:outputText style="font-weight: bold;float: left" id="eventoTagCc" value="#{eventWizardController.strTag}/10" ></h:outputText>
                                        </p:panel>
                                        <br></br>
                                        <br></br>
                                        <!--tooltip-->
                                        <div style="display: inline-block;width: 100%;padding-bottom: 8px">
                                            <p:tooltip showEffect="clip" position="left" for="btnTool" value="">
                                                <p:inputTextarea
                                                    rows="4"
                                                    cols="1"
                                                    title="Consejo Pro"
                                                    value="Mejora las posibilidades de
                                                    que descubran tu evento
                                                    añadiendo etiquetas
                                                    relevantes para el tema."
                                                    readonly="true"
                                                    style="border: none;background: none;width: 200px;color: #ffffff;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;">

                                                </p:inputTextarea>
                                            </p:tooltip>

                                        </div>

                                        <!--Div para agregar los tags asi de barbaros-->
                                        <p:panel id="tagListDiv" style="border: none;width: 100%;margin-top: 8px">
                                            <c:forEach
                                                id="tagList"
                                                var="tag"
                                                rendered="#{not empty eventWizardController.tags}"
                                                items="#{eventWizardController.tags}">
                                                <div style="margin-right: 16px;height: 16px;padding: 8px;display: inline-block;background: #2b7eab;overflow: hidden;border-radius:15px ">
                                                    <center>
                                                        <span
                                                            style="padding: 8px;color: #ffffff;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;">#{tag.tag}</span>
                                                        <p:commandButton
                                                            actionListener="#{eventWizardController.deleteTag}"
                                                            partialSubmit="true"
                                                            process="@this"
                                                            validateClient="true"
                                                            iconPos="center"
                                                            icon="fas  fa-cut"
                                                            style="padding: 4px;width: 4px;height: 4px;float: right;background: none">
                                                            <f:attribute name="delTag" value="#{tag}"/>
                                                        </p:commandButton>
                                                    </center>
                                                </div>
                                            </c:forEach>
                                        </p:panel>
                                        <p:panel   id="pnlTest"   style="width: 100%" header="Información del Organizador" >
                                            <!--Div para la UI del organizador-->
                                            <div style="width: 100%;border: solid #cccccc thin;border-radius: 6px;">
                                                <!--Nombre deo organizador logueado-->
                                                <label style="display: block;color: #999999;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;margin:4px">Organizador</label>
                                                <div class="ui-g ui-fluid">
                                                    <div class="ui-g-12 ui-md-11">
                                                        <p:outputLabel style="height: 100px;padding: 4px;margin-bottom: 8px" value="#{eventWizardController.nombreOrganizador}" ></p:outputLabel>
                                                        <label style="display: block;color: #999999;font-family: latoregular,Trebuchet MS,Arial,Helvetica,sans-serif;margin:4px">Descripción</label>
                                                        <p:inputTextarea 
                                                            id="inputDesc"
                                                            value="#{eventWizardController.descripcion}"
                                                            counter="eventoDescC"
                                                            counterTemplate="{0}/200"
                                                            maxlength="200"
                                                            placeholder="El candidato exitoso también se encargará de descubrir nuevas oportunidades dentro de la comunidad para establecer un vínculo más fuerte con nuestra audiencia objetivo y aumentar la cuota de mercado local..."
                                                            class="inputDesc" style="padding: 8px !important;display: block">

                                                        </p:inputTextarea>
                                                        <!--Mensaje de error-->
                                                        <p:message  id="messagesDesc" for="inputDesc" showDetail="false">
                                                            <p:autoUpdate />
                                                        </p:message>
                                                        <!--Counter para nombre y numero de tags-->
                                                        <h:outputText   style="font-weight: bold;float: right" id="eventoDescC" ></h:outputText>

                                                    </div>
                                                    <div class="ui-g-12 ui-md-1">
                                                        <p:graphicImage  cache="false" id="ppOrg" class="ppOrganizador"   value="#{eventWizardImageController.profileImage}" stream="true" style="background-attachment: fixed ;border-radius: 6px;display: block;height: 96%;"></p:graphicImage>
                                                    </div>

                                                    <div class="ui-g-12 ui-md-12">

                                                        <p:fileUpload update="imgLoader"  id="imgLoader" fileLimit="1" chooseIcon="fas fa-file-image" uploadIcon="fas fa-cloud-upload-alt"   fileUploadListener="#{eventWizardImageController.handleFileUpload}"  cancelLabel="Cancelar" invalidFileMessage="Tipo no soportado." fileLimitMessage="El archivo excede el tamaño permitido." allowTypes="/(\.|\/)(jpe?g|png)$/" uploadLabel="Confirmar" style="display: block" label="Fotografía del Organizador." ></p:fileUpload>
                                                        <p:commandButton icon="fas fa-folder-minus" actionListener="#{eventWizardImageController.deletFile}" partialSubmit="true" process="@this"   value="Eliminar Fotografía."></p:commandButton>

                                                    </div>


                                                </div>
                                            </div>
                                        </p:panel>


                                    </p:panel>
                                </p:panel>
                                <p:commandButton  validateClient="true" actionListener="#{eventWizardController.saveInfoBasica}" process="@this inputNameEvt,selectSoC,inputDesc,ppOrg"  partialSubmit="true" value="Guardar y continuar" style="float: right" ></p:commandButton>
                            </p:tab>


                            <h:outputText value="Step 2"></h:outputText>


                            <!-->Tab de prueba</!-->
                            <p:tab>

                            </p:tab>
                        </p:accordionPanel>
                    </h:form>
                </center>   



                <!-->Estilos feos</!-->
                <style>


                    .ui-fileupload-content .ui-progressbar {
                        width: 99%;
                        height: 20px;
                        margin: 0;
                        top: 5px;
                    }
                    /*Si esto llega a causarles problemas con sus iconos,me avisan y lo quito*/
                    .ui-button-icon-only .ui-icon, .ui-button-text-icon-left .ui-icon, .ui-button-text-icon-right .ui-icon {
                        position: absolute;
                        top: 51%;
                        height: 25px;
                        margin-top: -8px;
                    }

                    /*No es mucho.Pero es trabajo honesto*/
                    @media only screen and (max-width: 768px){
                        /*Dispositivos moviles grandes*/
                        .txtIntro{
                            height: 150px;
                        }
                        .btnTool{
                            float: inside;
                        }

                        .textButtonIcon{
                            height: 48px;
                            width: 48px;
                        }
                        .ppOrganizador {
                            width: 96% ;
                            float: inside;
                            margin-left: 5px ;
                            margin-top:  8px;
                        }
                        .inputTag  {
                            width: 95% !important;
                        }
                        .inputNameEvt{
                            width: 90% !important;
                            height: auto !important;
                        }
                        .inputDesc{
                            height: 66px !important;
                            width: 100% !important;
                            width: 96% !important;
                            margin: 4px !important;
                        }
                    }


                    @media only screen and (min-width: 1200px) {
                        /*Escritorio y Tablets*/
                        .textButtonIcon{
                            height: 48px;
                            width: 48px;
                        }
                        .inputTag  {
                            width: 99% !important;
                        }
                        .inputNameEvt{
                            width: 98% !important;
                        }

                        .ppOrganizador{
                            width: 200px ;
                            float: right ;
                            margin-right: 7px;
                        }  

                        .inputDesc{
                            margin-right: 150px;
                            margin-left: 8px !important;
                            height: 70% ! important;
                            width: 91% !important;
                        }

                        .btnTool{
                            float: right;
                        }
                        #eventoDescC{
                            margin-right: 110px;
                        }
                    }


                    .ui-widget-content {
                        background: #ffffff !important;
                    }
                    .ui-selectonemenu .ui-selectonemenu-label {
                        font-size: 18px !important;
                    }
                    .ui-selectonemenu-panel .ui-selectonemenu-item {
                        font-weight: normal;
                        font-size: 18px !important;
                        cursor : pointer;
                    }
                    .ui-inputfield {
                        margin: 0;
                        outline: medium none;
                        padding: 0px !important;
                        font-weight: normal;
                    }
                    .ui-g-1, .ui-g-2, .ui-g-3, .ui-g-4, .ui-g-5, .ui-g-6, .ui-g-7, .ui-g-8, .ui-g-9, .ui-g-10, .ui-g-11, .ui-g-12 {
                        float: left;
                        box-sizing: border-box;
                        padding: 0px !important;
                    }
                </style>
            </ui:define>

        </ui:composition>

    </body>
</html>
